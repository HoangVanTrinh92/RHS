if($("#review_<%= @review.id %> .comment-list a[rel='next']").length > 0){
  $("#review_<%= @review.id %> .comment-list a[rel='next']").remove()
}

if($("#review_<%= @review.id %> .list-features i").length > 0){
  $("#review_<%= @review.id %> .list-features i").remove()
}

if($("#review_<%= @review.id %> .new_comment").length > 0){
  $("#review_<%= @review.id %> .new_comment").remove()
}

$("#review_<%= @review.id %> .comment-list").append("<%= j render @comments %>")
$("#review_<%= @review.id %> .comment-list").append("<%= j link_to_next_page @comments, "Read more", remote: true %>")
$("#review_<%= @review.id %> .list-features").first().append("<i class='glyphicon glyphicon-triangle-top'></i>")
$("#review_<%= @review.id %> .comment-list").after("<%= j render "form" if user_signed_in? %>")

$(".control-area input[type='submit']").click(function(){
  if($(this).parent().prev().val().length === 0 && $(this).prevAll().last().val().length === 0){
    alert("You have to get content or image");
    return false;
  }
});

$(".control-area").hide()
$("#new_comment textarea").focus(function(){
  $(this).next().slideDown("slow")
});

$(".new_comment input[type='file']").hide();
$(".control-area img").click(function(){
  $(this).prev().click()
});

$(".new_comment input[type='file']").change(function(){
  $(this).nextAll("p").text($(this).val())
  $(this).closest(".review").css("margin-bottom", "-15px")
});

$(".list-features .glyphicon-triangle-top").click(function(){
  $("#review_<%= @review.id %> .comment-list .comment").remove()
  $("#review_<%= @review.id %> #new_comment").remove()
  $("#review_<%= @review.id %> .comment-list a").remove()
  $(this).prev().css("color", "rgba(0, 39, 59, 0.35)")
  $(this).remove()
})
